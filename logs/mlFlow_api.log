2025-06-07T15:03:39.717666+0000 INFO Route '/retrain' called for retraining with data_path=data/df_modifie.csv, from_existing_model=False
2025-06-07T15:03:39.726473+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-07T15:03:39.726780+0000 INFO Starting training iteration 0 of 3 (from_existing_model=False)
2025-06-07T15:03:39.761169+0000 INFO No previous model_id, creating new model.
2025-06-07T15:03:47.954369+0000 INFO Model performances: {'MSE': 172693088.0, 'MAE': 13007.3974609375, 'R²': 0.6067548990249634}
2025-06-07T15:07:54.828920+0000 ERROR Erreur lors du réentraînement: API request to http://localhost:5000/api/2.0/mlflow/runs/create failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/create (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7302a5549fc0>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-07T15:08:13.842781+0000 INFO Route '/retrain' called for retraining with data_path=data/df_modifie.csv, from_existing_model=True
2025-06-07T15:08:13.849754+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-07T15:08:13.850064+0000 INFO Starting training iteration 0 of 3 (from_existing_model=True)
2025-06-07T15:08:13.871860+0000 INFO Loading model from previous model_id: 60ca87cde38a42dab673c4c6491ba076
2025-06-07T15:09:17.482650+0000 INFO Route '/predict' called with data: [30, 170.0, 70.0, 2500.0, 'M', 'Oui', 'Aucun', 'Auvergne-Rhône-Alpes', 'Oui', 'Oui']
2025-06-07T15:12:20.208092+0000 ERROR Erreur lors du réentraînement: API request to http://localhost:5000/api/2.0/mlflow/runs/get failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/get?run_uuid=60ca87cde38a42dab673c4c6491ba076&run_id=60ca87cde38a42dab673c4c6491ba076 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7302a554b670>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-07T15:13:23.744959+0000 ERROR Erreur lors de la prédiction: API request to http://localhost:5000/api/2.0/mlflow/runs/get failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/get?run_uuid=60ca87cde38a42dab673c4c6491ba076&run_id=60ca87cde38a42dab673c4c6491ba076 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7b8b3fce5a80>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-07T15:26:29.471665+0000 INFO Route '/current_model' called by 172.18.0.1
2025-06-07T15:26:56.085670+0000 INFO Route '/retrain' called for retraining with data_path=data/df_new.csv, from_existing_model=False
2025-06-07T15:26:56.103644+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-07T15:26:56.103938+0000 INFO Starting training iteration 0 of 3 (from_existing_model=False)
2025-06-07T15:26:56.138684+0000 INFO No previous model_id, creating new model.
2025-06-07T15:27:04.170988+0000 INFO Model performances: {'MSE': 16929087.44312835, 'MAE': 2877.6568122076524, 'R²': 0.8436144466189229}
2025-06-07T15:31:11.099954+0000 ERROR Erreur lors du réentraînement: API request to http://localhost:5000/api/2.0/mlflow/runs/create failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/create (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x711afc6269e0>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-07T15:31:11.512145+0000 INFO Route '/retrain' called for retraining with data_path=df_new.csv, from_existing_model=False
2025-06-07T15:31:11.512992+0000 ERROR Erreur lors du réentraînement: [Errno 2] No such file or directory: 'df_new.csv'
2025-06-07T15:31:31.090069+0000 INFO Route '/retrain' called for retraining with data_path=./data/df_new.csv, from_existing_model=False
2025-06-07T15:31:31.098160+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-07T15:31:31.098494+0000 INFO Starting training iteration 0 of 3 (from_existing_model=False)
2025-06-07T15:31:31.118012+0000 INFO No previous model_id, creating new model.
2025-06-07T15:31:38.635675+0000 INFO Model performances: {'MSE': 15621119.169517599, 'MAE': 2711.4383211437043, 'R²': 0.8556970436851066}
2025-06-07T15:34:30.413845+0000 INFO Route '/predict' called with data: [30, 170.0, 70.0, 2500.0, 'M', 'Oui', 'Aucun', 'Auvergne-Rhône-Alpes', 'Oui', 'Oui']
2025-06-07T15:34:30.417149+0000 ERROR Erreur lors de la prédiction: 404: Aucun run_id trouvé. Veuillez entraîner un modèle d'abord.
2025-06-07T15:35:44.459976+0000 ERROR Erreur lors du réentraînement: API request to http://localhost:5000/api/2.0/mlflow/runs/create failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/create (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x711afc36a560>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-07T15:35:44.463307+0000 INFO Route '/retrain' called for retraining with data_path=./data/df_new.csv, from_existing_model=False
2025-06-07T15:35:44.476551+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-07T15:35:44.477098+0000 INFO Starting training iteration 0 of 3 (from_existing_model=False)
2025-06-07T15:35:44.519877+0000 INFO No previous model_id, creating new model.
2025-06-07T15:35:51.671091+0000 INFO Model performances: {'MSE': 15498890.08549305, 'MAE': 2700.676783844548, 'R²': 0.8568261572896441}
2025-06-07T15:39:58.681498+0000 ERROR Erreur lors du réentraînement: API request to http://localhost:5000/api/2.0/mlflow/runs/create failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/create (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x711addf3e4a0>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-07T15:39:58.684262+0000 INFO Route '/retrain' called for retraining with data_path=data/df_new.csv, from_existing_model=False
2025-06-07T15:39:58.704335+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-07T15:39:58.704900+0000 INFO Starting training iteration 0 of 3 (from_existing_model=False)
2025-06-07T15:39:58.740733+0000 INFO No previous model_id, creating new model.
2025-06-07T15:40:07.677319+0000 INFO Model performances: {'MSE': 17196578.947233237, 'MAE': 2896.787637944473, 'R²': 0.8411434447391872}
2025-06-07T15:44:14.389983+0000 ERROR Erreur lors du réentraînement: API request to http://localhost:5000/api/2.0/mlflow/runs/create failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/create (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x711b24251840>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-07T16:18:44.022715+0000 INFO Route '/retrain' called for retraining with data_path=data/df_new.csv, from_existing_model=False
2025-06-07T16:18:44.031995+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-07T16:18:44.032314+0000 INFO Starting training iteration 0 of 3 (from_existing_model=False)
2025-06-07T16:18:44.061575+0000 INFO No previous model_id, creating new model.
2025-06-07T16:18:52.137850+0000 INFO Model performances: {'MSE': 16501568.078882057, 'MAE': 2885.0196384076007, 'R²': 0.8475637352373074}
2025-06-07T16:22:59.856164+0000 ERROR Erreur lors du réentraînement: API request to http://localhost:5000/api/2.0/mlflow/runs/create failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/create (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7cbb78ecada0>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-07T16:47:09.492289+0000 INFO Route '/health' called by 172.18.0.1
2025-06-07T16:47:26.517033+0000 INFO Route '/current_model' called by 172.18.0.1
2025-06-07T16:47:39.670437+0000 INFO Route '/retrain' called for retraining with data_path=string, from_existing_model=True
2025-06-07T16:47:39.672047+0000 ERROR Erreur lors du réentraînement: [Errno 2] No such file or directory: 'string'
2025-06-07T16:48:35.535673+0000 INFO Route '/retrain' called for retraining with data_path=./data/df_new.csv, from_existing_model=False
2025-06-07T16:48:35.544589+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-07T16:48:35.545035+0000 INFO Starting training iteration 0 of 3 (from_existing_model=False)
2025-06-07T16:48:35.566003+0000 INFO No previous model_id, creating new model.
2025-06-07T16:48:42.847047+0000 INFO Model performances: {'MSE': 15408442.573178096, 'MAE': 2688.6466271209965, 'R²': 0.8576616827905215}
2025-06-07T16:52:49.535540+0000 ERROR Erreur lors du réentraînement: API request to http://localhost:5000/api/2.0/mlflow/runs/create failed with exception HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /api/2.0/mlflow/runs/create (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7cbb78c05b10>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-06-08T06:58:40.118810+0000 INFO Route '/health' called by 172.18.0.1
2025-06-08T07:01:42.276451+0000 INFO Route '/retrain' called for retraining with data_path=data/df_new.csv, from_existing_model=False
2025-06-08T07:01:42.293097+0000 INFO Données chargées pour réentraînement: shape=(2000, 13), colonnes=['nom', 'prenom', 'age', 'taille', 'poids', 'sexe', 'sport_licence', 'niveau_etude', 'region', 'smoker', 'nationalité_francaise', 'revenu_estime_mois', 'montant_pret']
2025-06-08T07:01:42.293467+0000 INFO Starting training iteration 0 of 3 (from_existing_model=False)
2025-06-08T07:01:42.329917+0000 INFO No previous model_id, creating new model.
2025-06-08T07:01:49.585212+0000 INFO Model performances: {'MSE': 17554233.808725044, 'MAE': 2932.7504384591516, 'R²': 0.837839542291892}
2025-06-08T07:01:59.141821+0000 INFO Run 1 terminé, run_id=c685e1fa84fc4e6481e9d064326e47f6
2025-06-08T07:01:59.156818+0000 INFO Starting training iteration 1 of 3 (from_existing_model=False)
2025-06-08T07:01:59.175161+0000 INFO Loading model from previous model_id: c685e1fa84fc4e6481e9d064326e47f6
2025-06-08T07:02:07.135448+0000 INFO Model performances: {'MSE': 13495073.020743584, 'MAE': 2403.6706294908627, 'R²': 0.8753367853195376}
2025-06-08T07:02:12.993232+0000 INFO Run 2 terminé, run_id=ebaa8a12c48a4961af59d212f8d5f520
2025-06-08T07:02:13.007250+0000 INFO Starting training iteration 2 of 3 (from_existing_model=False)
2025-06-08T07:02:13.025405+0000 INFO Loading model from previous model_id: ebaa8a12c48a4961af59d212f8d5f520
2025-06-08T07:02:19.787414+0000 INFO Model performances: {'MSE': 13503135.880122967, 'MAE': 2391.356168394, 'R²': 0.875262303175706}
2025-06-08T07:02:25.674654+0000 INFO Run 3 terminé, run_id=e68a2055f1a84f30aaff68726060634f
2025-06-08T07:02:25.690974+0000 INFO Nouveau modèle de prédiction mis à jour avec run_id: e68a2055f1a84f30aaff68726060634f (sauvegardé dans models/current_model.json)
